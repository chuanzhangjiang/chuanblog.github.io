<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>dwm安装文档</title><meta name="description" content="胸无大致，家里蹲！"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><link rel="icon" href="/chuanblog.github.io/images/favicon.ico"><link rel="stylesheet" href="/chuanblog.github.io/style/bulma.css"><link rel="stylesheet" href="/chuanblog.github.io/style/base.css"><link rel="stylesheet" href="/chuanblog.github.io/style/helper.css"><script src="/chuanblog.github.io/js/common.js"></script><link rel="stylesheet" href="/chuanblog.github.io/style/post.css"><link rel="stylesheet" href="/chuanblog.github.io/style/highlight-theme-light.css"><script src="/chuanblog.github.io/jslib/highlight.pack.js"></script><meta name="generator" content="Hexo 5.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/chuanblog.github.io/atom.xml" title="Hexo" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-mobile"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/chuanblog.github.io/">chuan's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">dwm安装文档</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/chuanblog.github.io/">Home</a></h3><h3 class="is-inline-block"><a href="/chuanblog.github.io/about">About</a></h3><h3 class="is-inline-block"><a href="/chuanblog.github.io/archives">Archives</a></h3></aside></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/chuanblog.github.io/">Home</a></h3><h3 class="is-inline-block"><a href="/chuanblog.github.io/about">About</a></h3><h3 class="is-inline-block"><a href="/chuanblog.github.io/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8EDWM"><span class="toc-text">关于DWM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-text">准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E4%BE%9D%E8%B5%96"><span class="toc-text">基础依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E6%9C%9F%E5%8A%9F%E8%83%BD%E6%80%A7%E8%BD%AF%E4%BB%B6"><span class="toc-text">后期功能性软件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DWM%E5%AE%89%E8%A3%85"><span class="toc-text">DWM安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AEDWM%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F"><span class="toc-text">设置DWM启动方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8display-manager%E5%90%AF%E5%8A%A8"><span class="toc-text">使用display manager启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8startx%E5%91%BD%E4%BB%A4%E4%BB%8E%E6%96%87%E5%AD%97%E7%95%8C%E9%9D%A2%E5%90%AF%E5%8A%A8-%E6%8E%A8%E8%8D%90"><span class="toc-text">使用startx命令从文字界面启动(推荐)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E8%BD%AF%E4%BB%B6%E6%8C%87%E5%AE%9A%E6%89%93%E5%BC%80%E6%A0%87%E7%AD%BE"><span class="toc-text">为软件指定打开标签</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E8%83%BD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">可能遇到的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E6%A0%8F%E6%97%A0%E6%B3%95%E6%98%BE%E7%A4%BAemoji"><span class="toc-text">状态栏无法显示emoji</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/chuanblog.github.io/tags/%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE"><i class="tag post-item-tag">系统配置</i></a><a href="/chuanblog.github.io/tags/dwm"><i class="tag post-item-tag">dwm</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">dwm安装文档</h1><time class="has-text-grey" datetime="2021-01-13T13:48:37.000Z">2021-01-13</time><article class="mt-2 post-content"><ul>
<li><a href="#%E5%89%8D%E8%A8%80">前言</a></li>
<li><a href="#%E5%85%B3%E4%BA%8Edwm">关于DWM</a></li>
<li><a href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">准备工作</a><ul>
<li><a href="#%E5%9F%BA%E7%A1%80%E4%BE%9D%E8%B5%96">基础依赖</a></li>
<li><a href="#%E5%90%8E%E6%9C%9F%E5%8A%9F%E8%83%BD%E6%80%A7%E8%BD%AF%E4%BB%B6">后期功能性软件</a></li>
</ul>
</li>
<li><a href="#dwm%E5%AE%89%E8%A3%85">DWM安装</a></li>
<li><a href="#%E8%AE%BE%E7%BD%AEdwm%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F">设置DWM启动方式</a><ul>
<li><a href="#%E4%BD%BF%E7%94%A8display-manager%E5%90%AF%E5%8A%A8">使用display manager启动</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8startx%E5%91%BD%E4%BB%A4%E4%BB%8E%E6%96%87%E5%AD%97%E7%95%8C%E9%9D%A2%E5%90%AF%E5%8A%A8%E6%8E%A8%E8%8D%90">使用startx命令从文字界面启动(推荐)</a></li>
</ul>
</li>
<li><a href="#%E4%B8%BA%E8%BD%AF%E4%BB%B6%E6%8C%87%E5%AE%9A%E6%89%93%E5%BC%80%E6%A0%87%E7%AD%BE">为软件指定打开标签</a></li>
<li><a href="#%E5%8F%AF%E8%83%BD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98">可能遇到的问题</a><ul>
<li><a href="#%E7%8A%B6%E6%80%81%E6%A0%8F%E6%97%A0%E6%B3%95%E6%98%BE%E7%A4%BAemoji">状态栏无法显示emoji</a></li>
</ul>
</li>
</ul>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本教程直接使用本人配置好的DWM，建议新手直接使用我的配置，等上手之后在在行下载官方源码进行编译安装配置。</p>
<h2 id="关于DWM"><a href="#关于DWM" class="headerlink" title="关于DWM"></a>关于DWM</h2><p>可以看B站CW大佬的<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV11J411t7RY">视频</a></p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="基础依赖"><a href="#基础依赖" class="headerlink" title="基础依赖"></a>基础依赖</h3><pre><code class="hljs plain">$ sudo apt-get install suckless-tools libx11-dev libxft-dev libxinerama-dev gcc make</code></pre>
<h3 id="后期功能性软件"><a href="#后期功能性软件" class="headerlink" title="后期功能性软件"></a>后期功能性软件</h3><p>透明配置支持</p>
<pre><code class="hljs plain">$ sudo apt install compton

或者用下面的工具

$ sudo apt install xcompmgr</code></pre>
<p>背景图片设置工具</p>
<pre><code class="hljs plain">$ sudo apt install feh</code></pre>
<p>电源监控工具</p>
<pre><code class="hljs plain">$ sudo apt install acpi acpitool</code></pre>
<p>背光灯调整工具</p>
<pre><code class="hljs plain">$ sudo apt install light</code></pre>
<p>为背光灯调整工具设置sudo免密码</p>
<pre><code class="hljs plain">$ sudo visudo</code></pre>
<p>然后在文本最后加入如下代码</p>
<pre><code class="hljs plain">{登录系统的用户名} ALL=NOPASSWD:/usr/bin/light</code></pre>
<p>安装截图工具</p>
<pre><code class="hljs plain">$ sudo apt install flameshot</code></pre>
<p>安装数字键盘工具</p>
<pre><code class="hljs plain">$ sudo apt install numlockx</code></pre>
<p>虚拟机可能需要以下软件</p>
<p>virtualbox</p>
<pre><code class="hljs plain">$ sudo apt-get install virtualbox-guest-utils virtualbox-guest-X11</code></pre>
<p>vmware</p>
<pre><code class="hljs plain">$ sudo apt-get install open-vm-tools open-vm-desktop</code></pre>
<h2 id="DWM安装"><a href="#DWM安装" class="headerlink" title="DWM安装"></a>DWM安装</h2><p>获取源码</p>
<pre><code class="hljs plain">$ git clone https://github.com/chuanzhangjiang/dwm.git</code></pre>
<p>移动到源码目录修改config.h文件，自行修改下图中用户目录名称</p>
<img src="/chuanblog.github.io/2021/01/13/dwm%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/config_modify.png" class="">

<p>获取dwm自定义脚本</p>
<pre><code class="hljs plain">$ git clone https://github.com/chuanzhangjiang/dwm-script.git</code></pre>
<p>将脚本文件软链接到<code>～/.dwm</code>目录</p>
<pre><code class="hljs plain">$ ln -s  ~/dwm-script的目录 ~/.dwm</code></pre>
<p>移动到dwm源码目录执行安装命令</p>
<pre><code class="hljs plain">$ sudo make clean install</code></pre>
<h2 id="设置DWM启动方式"><a href="#设置DWM启动方式" class="headerlink" title="设置DWM启动方式"></a>设置DWM启动方式</h2><p>有两种启动方式可以选择</p>
<h3 id="使用display-manager启动"><a href="#使用display-manager启动" class="headerlink" title="使用display manager启动"></a>使用display manager启动</h3><p>以ubuntu 20.04为例,ubuntu 20.04使用gdm3做为display manager，配置完成之后可以在登录界面选择dwm作为桌面启动，如下图：</p>
<img src="/chuanblog.github.io/2021/01/13/dwm%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/desktop_entry.png" class="">

<p>具体配置方式，进入<code>/usr/share/xsessions/</code>目录，新建文件<code>dwm.desktop</code>,输入内容：</p>
<pre><code class="hljs plain">[Desktop Entry]
Encoding=UTF-8
Name=Dwm
Comment=Dynamic window manager
Exec=dwm
Icon=dwm
Type=XSession</code></pre>
<h3 id="使用startx命令从文字界面启动-推荐"><a href="#使用startx命令从文字界面启动-推荐" class="headerlink" title="使用startx命令从文字界面启动(推荐)"></a>使用startx命令从文字界面启动(推荐)</h3><p>此方式开机更加快速，使用更加灵活，系统资源占用更少。</p>
<p><strong>首先将系统改为默认进入文字界面</strong></p>
<p>修改grub配置,打开文件<code>/etc/default/grub</code>,将<code>GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"</code>的改为<code>GRUB_CMDLINE_LINUX_DEFAULT="text"</code>然后执行命令</p>
<pre><code class="hljs plain">$ sudo update-grub</code></pre>
<p>将启动等级改为多用户等级，执行如下命令：</p>
<pre><code class="hljs plain">$ systemctl set-default multi-user.target 
// 如果想改回启动图形界面执行下面
$ systemctl set-default graphical.target</code></pre>
<p>最后修改<code>~/.xsession</code>文件（如果没有就新建），在最后一行加入</p>
<pre><code class="hljs plain">exec dwm</code></pre>
<p>重启电脑，执行startx命令，直接进入dwm，同时也可以执行<code>sudo systemctl start gdm.service</code>命令，打开gdm3的用户登录界面。</p>
<h2 id="为软件指定打开标签"><a href="#为软件指定打开标签" class="headerlink" title="为软件指定打开标签"></a>为软件指定打开标签</h2><pre><code class="hljs plain">xprop | grep WM_CLASS</code></pre>
<p>鼠标会变为十字架,用十字架点击想要被指定的软件的打开窗口，terminal就会显示该软件的instance和class:</p>
<pre><code class="hljs plain">WM_CLASS(STRING) = instance, class</code></pre>
<p>将信息填入config.h的下列位置:</p>
<img src="/chuanblog.github.io/2021/01/13/dwm%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/rule.png" class="">

<p><code>tags mask</code>用于指定打开的表情序号，一号标签为二进制<code>000000001</code>,二号为<code>000000010</code>,类推。</p>
<p>重新编译安装即可。<br>完。</p>
<h2 id="可能遇到的问题"><a href="#可能遇到的问题" class="headerlink" title="可能遇到的问题"></a>可能遇到的问题</h2><h3 id="状态栏无法显示emoji"><a href="#状态栏无法显示emoji" class="headerlink" title="状态栏无法显示emoji"></a>状态栏无法显示emoji</h3><p><strong>问题说明</strong><br>问题是由于dwm和st以来的xft出现bug导致的，arch平台可以安装<code>libxft-bgra</code>补丁来修复xft的bug，其他平台解决此问题不太容易，只能等libxft更新。<br>本文基于ubuntu 20.04,采用迂回战术解决此问题。<br><strong>安装emoji支持字体</strong></p>
<pre><code class="hljs plain">sudo apt install fonts-symbola</code></pre>
<p><strong>配置dwm</strong><br>修改dwm的<code>config.h</code>文件：</p>
<img src="/chuanblog.github.io/2021/01/13/dwm%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/dwm-symbola.png" class="">

<p><strong>重新编译安装</strong><br>重新编译安装dwm即可。</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-small is-default py-4" href="/chuanblog.github.io/2021/01/13/%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E5%88%9D%E5%A7%8B%E9%85%8D%E7%BD%AE%E6%96%87%E6%A1%A3/" title="系统安装初始配置文档"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: 系统安装初始配置文档</span></a></section><article class="mt-6 comment-container"><script async repo="chuanzhangjiang/chuanblog.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/chuanzhangjiang"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><a title="zhihu" target="_blank" rel="noopener nofollow" href="//zhihu.com/people/zhang-chuan-72-58"><i class="iconfont icon-zhihu"></i></a><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> chuan 2022</span></p><div class="is-flex"><p>Powered by Hexo｜</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by &nbspHaojen&nbsp</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/chuanblog.github.io/js/post.js"></script></body></html>